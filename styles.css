/* =========================
   åŸºæœ¬ä¸»é¡Œèˆ‡æ’ç‰ˆ
   ========================= */
:root{
  --bg:#0b0c10; --fg:#e6e6e6; --muted:#9aa0a6;
  --card:#11131a; --border:#23252e; --accent:#7aa2f7;
  --radius:12px; --shadow:0 8px 24px rgba(0,0,0,.25);
}

*{box-sizing:border-box}
html,body{
  margin:0;padding:0;background:var(--bg);color:var(--fg);
  font:16px/1.6 system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","Hiragino Sans","Microsoft JhengHei",sans-serif;
}
a{color:inherit;text-decoration:none}
.container{max-width:1100px;margin:0 auto;padding:0 20px}

/* =========================
   Header
   ========================= */
.site-header{padding:40px 0 20px}
.site-header h1{margin:0 0 8px;font-size:32px;letter-spacing:.4px}
.subtitle{margin:0 0 8px;color:var(--muted)}
.meta a{margin-right:12px;color:var(--accent)}

/* =========================
   æ§åˆ¶åˆ—ï¼ˆç¯©é¸ / æœå°‹ / æ’åºï¼‰
   ========================= */
.controls{
  display:grid;grid-template-columns:1fr auto;gap:12px;
  margin:12px auto 20px;align-items:center;
}
.filters{display:flex;flex-wrap:wrap;gap:8px}
.btn{
  padding:10px 14px;border:1px solid var(--border);
  background:#0d0f16;border-radius:999px;cursor:pointer;touch-action:manipulation;
}
.btn:hover{border-color:var(--accent)}
.btn.is-checked{background:var(--accent);color:#0c1022;border-color:transparent}
.search-sort{display:flex;gap:8px;align-items:center}
#search,#sort{
  padding:10px 12px;border:1px solid var(--border);
  background:#0d0f16;color:var(--fg);border-radius:10px;min-height:40px;
}

/* =========================
   Isotope ç€‘å¸ƒæµï¼šå«é–“éš”çš„æ•´å€æ•¸ï¼ˆå¯¬/é«˜ï¼‰
   ========================= */
/* æ¡Œé¢é è¨­ï¼š4 æ¬„ + 16px é–“éš”ï¼›æ‰€æœ‰å¯¬/é«˜çš†ä»¥ã€Œå«é–“éš”ã€æ•´å€è¨ˆç®— */
.grid{
  position:relative;transition:height .25s ease;padding:4px 0;

  --cols: 4;             /* æ¬„æ•¸ï¼ˆæ¡Œé¢ï¼‰ */
  --gut: 16px;           /* æ¬„é–“è·ï¼ˆæ¡Œé¢ï¼‰ */

  /* å–®æ¬„å¯¬ï¼ˆæ•´é«”æ‰£æ‰æ‰€æœ‰é–“è·å¾Œå¹³å‡åˆ†é…ï¼‰ */
  --colw: calc((100% - (var(--cols) - 1) * var(--gut)) / var(--cols));

  /* åŸºç¤åˆ—é«˜ï¼ˆç¸®åœ–é«˜ + å›ºå®šæ–‡å­—å€ï¼‰ï¼›ratio å¯æ”¹ 10/16ã€9/16 ç­‰ */
  --thumb-ratio: 0.5625; /* 9/16 è¦–è¦ºåå¯¬ */
  --body-h: 88px;        /* æ¨™é¡Œ + å…©è¡Œæ‘˜è¦ + metaï¼›å¯å¾®èª¿ */
  --rowh: calc(var(--colw) * var(--thumb-ratio) + var(--body-h));
}

/* sizer ä¾› Isotope è®€å– */
.grid-sizer, .grid-item{ width: var(--colw); }
.gutter-sizer{ width: var(--gut); }

/* å‚ç›´é–“è·åŒæ¨£ç”¨ gutterï¼ŒIsotope æœƒè¨ˆå…¥é«˜åº¦ */
.grid-item{
  margin-bottom: var(--gut);
  will-change: transform, opacity;
  height: var(--rowh);   /* é«˜åº¦åŸºæº–ï¼ˆ1Ã—åˆ—é«˜ï¼‰ */
  transition: transform .18s ease, opacity .18s ease;
}

/* å¯¬åº¦å€æ•¸ï¼ˆå«ä¸­é–“é–“éš”ï¼‰ */
.grid-item--w2{ width: calc(2 * var(--colw) + 1 * var(--gut)); }
.grid-item--w3{ width: calc(3 * var(--colw) + 2 * var(--gut)); }

/* é«˜åº¦å€æ•¸ï¼ˆå«ä¸­é–“é–“éš”ï¼‰ */
.grid-item--h2{ height: calc(2 * var(--rowh) + 1 * var(--gut)); }
.grid-item--h3{ height: calc(3 * var(--rowh) + 2 * var(--gut)); }

/* =========================
   å¡ç‰‡ï¼ˆå« CSS éª¨æ¶ä½”ä½ï¼‰
   ========================= */
.card{
  height:100%;display:flex;flex-direction:column;
  background:var(--card);border:1px solid var(--border);
  border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);
  transition:transform .2s ease,border-color .2s ease;
}
.card:hover{transform:translateY(-2px);border-color:var(--accent)}

/* ç¸®åœ–ï¼šå¡«æ»¿å‰©é¤˜ç©ºé–“ï¼›ç´” CSS éª¨æ¶ */
.thumb,.hero{
  flex:1 1 auto; min-height:0; position:relative; overflow:hidden;
  border-radius:12px; box-shadow:var(--shadow);
  background:linear-gradient(90deg,#14161d 25%,#1b1f2a 50%,#14161d 75%);
  background-size:200% 100%; animation:skeleton 1.1s linear infinite;
}
@keyframes skeleton{0%{background-position:200% 0}100%{background-position:-200% 0}}

.thumb>img,.hero>img{
  position:absolute;inset:0;width:100%;height:100%;
  object-fit:cover;opacity:0;transition:opacity .25s ease;display:block;
}
.img-loaded{opacity:1}

/* å¤±æ•—ï¼ˆä¸è¼‰å…¥å¤–éƒ¨ä½”ä½åœ–ï¼‰ï¼šç”¨æ¨£å¼æç¤º */
.thumb.is-error::before,.hero.is-error::before{
  content:"No Image";
  position:absolute;inset:0;display:grid;place-items:center;
  color:#9aa0a6;font-size:14px;letter-spacing:.08em;
  background:linear-gradient(180deg,#151823 0%,#11131a 100%);
  border:1px dashed #2a2f3a;border-radius:12px;
}

/* æ–‡å­—å€å›ºå®šé«˜ï¼ˆå°é½Š --body-hï¼‰é¿å…æŠŠå¡ç‰‡æ’å£ */
.card-body{
  flex:0 0 var(--body-h);
  padding:14px 14px 12px;
  display:grid;grid-template-rows:auto auto 1fr;row-gap:10px;
}
.card-body h3{
  margin:0; font-size:18px; letter-spacing:.2px;
  display:-webkit-box; -webkit-line-clamp:1; -webkit-box-orient:vertical; overflow:hidden;
}
.desc{
  margin:0;color:var(--muted);
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.meta-list{
  list-style:none;padding:0;margin:0;
  display:flex;flex-wrap:wrap;gap:10px;color:var(--muted);font-size:13px;
}

/* é¡å‹è¦–è¦ºå·®ç•°ï¼ˆå¯é¸æ“‡ä¿ç•™/èª¿æ•´ï¼‰ */
.grid-item[data-type="project"] .thumb{ /* è¦–è¦ºåé«˜å¯åœ¨æ­¤å¾®èª¿ */ }
.grid-item[data-type="blog"]    .thumb{ /* è¦–è¦ºåå¯¬å¯åœ¨æ­¤å¾®èª¿ */ }

/* =========================
   æ–‡ç« é ï¼šHero å°é½Š + å…§å®¹ + TOC
   ========================= */
.post-hero{margin:32px 0 24px}
.post-hero .container{max-width:1100px;margin:0 auto;padding:0 20px}
.hero{ /* ç”¨æ–¼æ–‡ç«  hero åœ–å®¹å™¨ï¼ˆæ²¿ç”¨éª¨æ¶ï¼‰ */ }

.post-layout{display:grid;gap:24px;grid-template-columns:1fr}
@media (min-width:992px){ .post-layout{grid-template-columns:220px 1fr} }

.post-content{
  background:var(--card);border:1px solid var(--border);
  border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);
}
.post-content img{max-width:100%;height:auto;border-radius:10px}

/* TOC */
.toc{
  position:sticky;top:16px;align-self:start;background:#0d0f16;
  border:1px solid var(--border);border-radius:10px;padding:12px;
}
.toc h3{margin:0 0 8px;font-size:14px;color:var(--muted)}
.toc ul{list-style:none;padding:0;margin:0}
.toc li{margin:6px 0;font-size:14px}
.toc .toc-h2{margin-left:8px}.toc .toc-h3{margin-left:16px}
.toc a{color:var(--accent)}
.back-link{color:var(--accent)}

/* =========================
   Lightbox
   ========================= */
.lightbox{position:fixed;inset:0;display:none}
.lightbox.show{display:block;z-index:9999}
.lightbox-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.8)}
.lightbox-img{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  max-width:92vw;max-height:92vh;border-radius:12px;
}
.lightbox-close{
  position:absolute;top:16px;right:20px;background:transparent;color:#fff;
  border:1px solid rgba(255,255,255,.4);border-radius:999px;font-size:24px;width:40px;height:40px;cursor:pointer;
}

/* =========================
   Footer
   ========================= */
.site-footer{
  padding:48px 0;color:var(--muted);text-align:center;
  border-top:1px solid var(--border);margin-top:40px;
}

/* =========================
   éŸ¿æ‡‰å¼ï¼šå¹³æ¿ï¼2 æ¬„ï¼›æ‰‹æ©Ÿï¼1 æ¬„
   ï¼ˆå¯¬/é«˜ä»ç¶­æŒå«é–“éš”çš„æ•´å€æ•¸ï¼‰
   ========================= */

/* ğŸ“Ÿ å¹³æ¿ï¼š2 æ¬„ã€14px gutterï¼›w3 ç„¡æ•ˆï¼ˆæ”¶æ–‚ï¼‰ */
@media (min-width:720px) and (max-width:1023.98px){
  .grid{
    --cols: 2;
    --gut: 14px;
    --colw: calc((100% - (var(--cols) - 1) * var(--gut)) / var(--cols));
    --rowh: calc(var(--colw) * var(--thumb-ratio) + var(--body-h));
  }
  .grid-item--w3{ width: 100% !important; }
}

/* ğŸ“± æ‰‹æ©Ÿï¼š1 æ¬„ã€12px gutterï¼›æ‰€æœ‰å¯¬åº¦å€æ•¸æ”¶æ–‚ç‚º 100% */
@media (max-width:719.98px){
  .site-header{padding:28px 0 16px}
  .site-header h1{font-size:26px}
  .controls{grid-template-columns:1fr;gap:10px}
  .filters{gap:6px}
  .btn{padding:9px 12px;min-height:40px}
  .search-sort{gap:6px}
  #search{flex:1}
  .post-hero .container{padding:0 14px}
  .post-content{padding:16px}

  .grid{
    --cols: 1;
    --gut: 12px;
    --colw: calc((100% - (var(--cols) - 1) * var(--gut)) / var(--cols));
    --rowh: calc(var(--colw) * var(--thumb-ratio) + var(--body-h));
  }
  .grid-item--w2, .grid-item--w3{ width:100% !important; }
}
